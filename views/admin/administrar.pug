extends ../layout/index
    
block contenido
    include ../layout/header

    div(class="w-full flex-1 mb-12")

        include ../layout/admin
        
        div(class="grid grid-cols-2 container mx-auto gap-10")
            div(class="flex flex-col gap-6")
                h1(class="col-start-1 col-end-3 mx-auto text-3xl font-bold font-display text-sky-950 justify-center") Mes Actual
                div(class="grid grid-cols-2 gap-y-3 gap-x-3")
                    //- Tabla Usuarios 
                    div(class="flex flex-col gap-4 border-2 p-3") 
                        h1(class="mx-auto text-center text-xl font-bold font-display text-sky-950") Usuarios
                        div(class="flex justify-between")
                            p(class="text-sm") N° Usuarios Nuevos:
                            if usuariosNuevosActual
                                p(class="text-sm font-bold")= usuariosNuevosActual
                            else 
                                p(class="text-sm font-bold") N/A
                        div(class="flex justify-between")
                            p(class="text-sm") Distribuición de Géneros:
                            if  hombresActual && usuariosNuevosActual
                                p(class="text-sm font-bold") #{((hombresActual/usuariosNuevosActual)*100).toFixed(2)}% (M) / #{((mujeresActual/usuariosNuevosActual)*100).toFixed(2)}% (F)
                            else 
                                p(class="text-sm font-bold") N/A
                        div(class="flex justify-between")
                            p(class="text-sm") Usuarios nuevos que reservaron (%):
                            if usuariosNuevosActual == 0
                                p(class="text-sm text-right font-bold") N/A
                            else 
                                p(class="text-sm font-bold") #{(reservaUsuariosNuevosActual/usuariosNuevosActual)*100}%
                    //- Tabla Reservas
                    div(class="flex flex-col gap-3 border-2 p-3") 
                        h1(class="mx-auto text-center text-xl font-bold font-display text-sky-950") Reservas
                        div(class="flex justify-between")
                            p(class="text-sm") Reservas generadas:
                            if reservasNuevasActual
                                p(class="text-sm font-bold")= reservasNuevasActual
                            else 
                                p(class="text-sm font-bold") N/A
                        div(class="flex justify-between")
                            p(class="text-sm") Día con más reservas:
                            if diaConMasReservasActual
                                p(class="text-sm font-bold") #{diaConMasReservasActual.get('dia')} (Cant.:#{diaConMasReservasActual.get('totalReservas')})
                            else 
                                p(class="text-sm font-bold") N/A
                        div(class="flex justify-between")
                            p(class="text-sm") Hab. preferida:
                            if tipoHabitacionMasOcupadaActual
                                p(class="text-sm font-bold") #{tipoHabitacionMasOcupadaActual.get('tipoHabitacion')} (#{tipoHabitacionMasOcupadaActual.get('totalReservas')} reservas) 
                            else 
                                p(class="text-sm font-bold") N/A 
                        div(class="flex justify-between")
                            p(class="text-sm") Hab. menos preferida:
                            if tipoHabitacionMenosOcupadaActual
                                p(class="text-sm font-bold") #{tipoHabitacionMenosOcupadaActual.get('tipoHabitacion')} (#{tipoHabitacionMenosOcupadaActual.get('totalReservas')} reservas)
                            else 
                                p(class="text-sm font-bold") N/A
                    //- Tabla Mensajes
                    div(class="flex flex-col gap-3 border-2 p-3") 
                        h1(class="mx-auto text-center text-xl font-bold font-display text-sky-950") Mensajes
                        div(class="flex justify-between")
                            p(class="text-sm") Mensajes nuevos:
                            if mensajesNuevosActual
                                p(class="text-sm font-bold")= mensajesNuevosActual
                            else 
                                p(class="text-sm font-bold") N/A
                        div(class="flex justify-between")
                            p(class="text-sm") Mensajes respondidos:
                            if mensajesRespondidosActual
                                p(class="text-sm font-bold")= mensajesRespondidosActual
                            else 
                                p(class="text-sm font-bold") N/A
                        div(class="flex justify-between")
                            p(class="text-sm") Mayor tipo de mensajes:
                            if mayorMotivoMensaje
                                p(class="text-sm font-bold first-letter:uppercase") #{mayorMotivoMensaje.get('motivo')} (#{mayorMotivoMensaje.get('totalMensajes')})
                            else 
                                p(class="text-sm font-bold first-letter:uppercase") N/A
                        div(class="flex justify-between")
                            p(class="text-sm") Menor tipo de mensajes:
                            if menorMotivoMensaje
                                p(class="text-sm font-bold first-letter:uppercase") #{menorMotivoMensaje.get('motivo')}
                            else 
                                p(class="text-sm font-bold first-letter:uppercase") N/A

                    //- Tabla Menús
                    div(class="flex flex-col gap-3 border-2 p-3") 
                        h1(class="mx-auto text-center text-xl font-bold font-display text-sky-950") Menús
                        div(class="flex justify-between")
                            p(class="text-sm") Plato favorito:
                            if platoFavorito.name
                                p(class="text-sm font-bold") #{platoFavorito[0].name}
                            else
                                p(class="text-sm font-bold") N/A
                        div(class="flex justify-between")
                            p(class="text-sm") Plato menos favorito:
                            if platoFavorito.name
                                p(class="text-sm font-bold") #{platoMenosFavorito[0].name}
                            else 
                                p(class="text-sm font-bold") N/A
                        div(class="flex justify-between")
                            p(class="text-sm") Dinero Generado:
                            if dineroGenerado.dineroGenerado
                                p(class="text-sm font-bold") $#{dineroGenerado.dineroGenerado}
                            else 
                                p(class="text-sm font-bold") N/A
                    //- Tabla Financiamiento
                    div(class="col-start-1 col-end-3 flex flex-col gap-3 border-2 p-3") 
                        h1(class="mx-auto text-center text-xl font-bold font-display text-sky-950") Financiamiento
                        div(class="flex justify-between")
                            p(class="text-sm") Dinero obtenido en reservas:
                            if dineroGeneradoReservas.totalDinero
                                p(class="text-sm font-bold") $#{dineroGeneradoReservas.totalDinero}
                            else 
                                p(class="text-sm font-bold") N/A
                        div(class="flex justify-between")
                            p(class="text-sm") Promedio de días por reserva:
                            //- if promedioDiasReservas
                            p(class="text-sm font-bold") #{promedioDiasReservas} 
                            //- else 
                            //-     p(class="text-sm font-bold") N/A
                        div(class="flex justify-between")
                            p(class="text-sm") Promedio de dinero por reserva:
                            if promedioDineroReserva.promedioDinero
                                p(class="text-sm font-bold") $#{promedioDineroReserva.promedioDinero}
                            else 
                                p(class="text-sm font-bold") N/A
                            
            div(class="flex flex-col gap-6")
                h1(class="col-start-1 col-end-3 mx-auto text-3xl font-bold font-display text-sky-950 justify-center") Mes Anterior
                div(class="grid grid-cols-2 gap-y-3 gap-x-3")
                    //- Tabla Usuarios 
                    div(class="flex flex-col gap-4 border-2 p-3") 
                        h1(class="mx-auto text-center text-xl font-bold font-display text-sky-950") Usuarios
                        div(class="flex justify-between")
                            p(class="text-sm") N° Usuarios Nuevos:
                            if usuarioMesAnterior
                                p(class="text-sm font-bold")= usuarioMesAnterior 
                            else 
                                p(class="text-sm font-bold") N/A
                        div(class="flex justify-between")
                            p(class="text-sm") Distribuición de Géneros:
                            if  hombresAnterior && usuarioMesAnterior
                                p(class="text-sm font-bold") #{((hombresAnterior/usuarioMesAnterior)*100).toFixed(2)}% (M) / #{((mujeresAnterior/usuarioMesAnterior)*100).toFixed(2)}% (F)
                            else 
                                p(class="text-sm font-bold") N/A
                        div(class="flex justify-between")
                            p(class="text-sm") Usuarios nuevos que reservaron (%):
                            if usuarioMesAnterior == 0
                                p(class="text-sm text-right font-bold") N/A
                            else
                                p(class="text-sm font-bold") #{usuariosNuevosReservaAnterior / usuarioMesAnterior * 100}%
                    //- Tabla Reservas
                    div(class="flex flex-col gap-3 border-2 p-3") 
                        h1(class="mx-auto text-center text-xl font-bold font-display text-sky-950") Reservas
                        div(class="flex justify-between")
                            p(class="text-sm") Reservas generadas:
                            if reservasNuevasAnterior
                                p(class="text-sm font-bold")= reservasNuevasAnterior
                            else 
                                p(class="text-sm font-bold") N/A
                        div(class="flex justify-between")
                            p(class="text-sm") Día con más reservas:
                            if diaMasReservasAnterior
                                p(class="text-sm font-bold") #{diaMasReservasAnterior.get('dia')} (Cant.:#{diaMasReservasAnterior.get('totalReservas')})
                            else 
                                p(class="text-sm font-bold") N/A
                        div(class="flex justify-between")
                            p(class="text-sm") Tipo de habitación preferida:
                            if tipoHabitacionMasOcupadaAnterior
                                p(class="text-sm font-bold") #{tipoHabitacionMasOcupadaAnterior.get('tipoHabitacion')} (#{tipoHabitacionMasOcupadaAnterior.get('totalReservas')} reservas) 
                            else 
                                p(class="text-sm font-bold") N/A 
                        div(class="flex justify-between")
                            p(class="text-sm") Tipo de habitación menos preferida:
                            if tipoHabitacionMenosOcupadaAnterior
                                p(class="text-sm font-bold") #{tipoHabitacionMenosOcupadaAnterior.get('tipoHabitacion')} (#{tipoHabitacionMenosOcupadaAnterior.get('totalReservas')} reservas)
                            else 
                                p(class="text-sm font-bold") N/A
                    //- Tabla Mensajes
                    div(class="flex flex-col gap-3 border-2 p-3") 
                        h1(class="mx-auto text-center text-xl font-bold font-display text-sky-950") Mensajes
                        div(class="flex justify-between")
                            p(class="text-sm") Mensajes nuevos:
                            if mensajesNuevoAnterior
                                p(class="text-sm font-bold")= mensajesNuevoAnterior
                            else 
                                p(class="text-sm font-bold") N/A
                        div(class="flex justify-between")
                            p(class="text-sm") Mensajes respondidos:
                            if mensajesRespondidosAnterior
                                p(class="text-sm font-bold")= mensajesRespondidosAnterior
                            else 
                                p(class="text-sm font-bold") N/A
                        div(class="flex justify-between")
                            p(class="text-sm") Mayor tipo de mensajes:
                            if mayorMotivoMensajeAnterior
                                p(class="text-sm font-bold first-letter:uppercase") #{mayorMotivoMensajeAnterior.get('motivo')} (#{mayorMotivoMensajeAnterior.get('totalMensajes')})
                            else 
                                p(class="text-sm font-bold first-letter:uppercase") N/A
                        div(class="flex justify-between")
                            p(class="text-sm") Menor tipo de mensajes:
                            if menorMotivoMensajeAnterior
                                p(class="text-sm font-bold first-letter:uppercase") #{menorMotivoMensajeAnterior.get('motivo')}
                            else 
                                p(class="text-sm font-bold first-letter:uppercase") N/A
                    //- Tabla Menús
                    div(class="flex flex-col gap-3 border-2 p-3") 
                        h1(class="mx-auto text-center text-xl font-bold font-display text-sky-950") Menús
                        div(class="flex justify-between")
                            p(class="text-sm") Plato favorito:
                            if platoFavAnterior.name
                                p(class="text-sm font-bold") #{platoFavAnterior[0].name}
                            else
                                p(class="text-sm font-bold") N/A
                        div(class="flex justify-between")
                            p(class="text-sm") Plato menos favorito:
                            if platoFavAnterior.name
                                p(class="text-sm font-bold") #{platoMenosFavoritoAnterior[0].name}
                            else 
                                p(class="text-sm font-bold") N/A
                        div(class="flex justify-between")
                            p(class="text-sm") Dinero Generado:
                            if dineroGeneradoAnterior.dineroGenerado
                                p(class="text-sm font-bold") $#{dineroGeneradoAnterior.dineroGenerado}
                            else 
                                p(class="text-sm font-bold") N/A
                    //- Tabla Financiamiento
                    div(class="col-start-1 col-end-3 flex flex-col gap-3 border-2 p-3") 
                        h1(class="mx-auto text-center text-xl font-bold font-display text-sky-950") Financiamiento
                        div(class="flex justify-between")
                            p(class="text-sm") Dinero obtenido en reservas:
                            if dineroGeneradoReservasAnterior.totalDinero
                                p(class="text-sm font-bold") $#{dineroGeneradoReservasAnterior.totalDinero}
                            else 
                                p(class="text-sm font-bold") N/A
                        div(class="flex justify-between")
                            p(class="text-sm") Promedio de días por reserva:
                            //- if promedioDiasReservas
                            p(class="text-sm font-bold") #{promedioDiasReservasAnterior} 
                            //- else 
                            //-     p(class="text-sm font-bold") N/A
                        div(class="flex justify-between")
                            p(class="text-sm") Promedio de dinero por reserva:
                            if promedioDineroReservaAnterior.promedioDinero
                                p(class="text-sm font-bold") $#{promedioDineroReservaAnterior.promedioDinero}
                            else 
                                p(class="text-sm font-bold") N/A
                
    include ../layout/footer